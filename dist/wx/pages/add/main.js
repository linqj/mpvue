require("../../common/manifest.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([2],{PfYo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("5nAL"),o=a.n(n),s=a("XsEk");new o.a(s.a).$mount()},TNAc:function(e,t,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-content"},[a("div",{staticClass:"title-name-first"},[e._v("新建团队")]),e._v(" "),a("view",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teamName,expression:"teamName"}],attrs:{placeholder:"输入团队名称",eventid:"0"},domProps:{value:e.teamName},on:{input:function(t){t.target.composing||(e.teamName=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"add-button",attrs:{eventid:"1"},on:{click:e.addTeam}},[e._v("确认添加团队")]),e._v(" "),a("div",{staticClass:"add-team"},[a("span",{staticClass:"title-name-second"},[e._v("团队：")]),e._v(" "),e._l(e.teamData,function(t,n){return a("span",{key:n,staticClass:"add-team-item",attrs:{eventid:"2_"+n},on:{click:function(a){e.radioChange(t)}}},[e._v(e._s(t.teamName))])})],2),e._v(" "),e.selectTeam.teamName?a("div",[a("span",{staticClass:"title-name-second"},[e._v("选择的团队：")]),e._v("\n    "+e._s(e.selectTeam.teamName)+"\n  ")]):e._e(),e._v(" "),a("div",{staticClass:"add-team"},[a("span",{staticClass:"title-name-second"},[e._v("团队成员：")]),e._v(" "),e._l(e.selectTeam.groups,function(t,n){return a("span",{key:n,staticClass:"add-team-item-people"},[e._v(e._s(t))])})],2),e._v(" "),a("view",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.peopleName,expression:"peopleName"}],attrs:{placeholder:"输入成员姓名",eventid:"3"},domProps:{value:e.peopleName},on:{input:function(t){t.target.composing||(e.peopleName=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"add-button",attrs:{eventid:"4"},on:{click:e.addPeople}},[e._v("确认添加成员")])],1)},staticRenderFns:[]};t.a=n},XsEk:function(e,t,a){"use strict";var n=a("q56b"),o=a("TNAc");var s=function(e){a("zt6K")},i=a("ybqe")(n.a,o.a,s,"data-v-6cffc825",null);t.a=i.exports},q56b:function(e,t,a){"use strict";var n=wx.cloud.database();t.a={data:function(){return{teamName:"",teamData:[],peopleName:"",selectTeam:{}}},created:function(){getApp()},mounted:function(){this.searchTeam()},computed:{},watch:{selectTeam:{handler:function(e,t){e||(this.selectTeam={}),console.log("selectTeam   val"),console.log(e)},deep:!0}},components:{},methods:{addPeople:function(){var e=this,t=this.peopleName,a=this.selectTeam.groups;if(this.selectTeam.teamName)if(t)if(a.find(function(e){return e==t}))wx.showToast({title:"该成员已存在",icon:"none",duration:2e3});else{var o=a;o=o.concat([t]);var s=this.selectTeam._id;n.collection("team").doc(s).update({data:{groups:o}}).then(function(t){wx.showToast({title:"添加成员成功",icon:"none",duration:2e3}),e.peopleName="",e.searchOneTeam(s)}).catch(function(e){console.log(e)})}else wx.showToast({title:"请输入要添加的成员名称",icon:"none",duration:2e3});else wx.showToast({title:"请选择该成员对应的团队",icon:"none",duration:2e3})},radioChange:function(e){this.selectTeam=e},searchTeam:function(){var e=this;console.log(2222),n.collection("team").get().then(function(t){e.teamData=t.data;var a=null;e.selectTeam&&e.selectTeam.teamName&&(a=e.teamData.find(function(t){return t.teamName==e.selectTeam.teamName})),e.selectTeam=a?e.selectTeam:e.teamData[0]}).catch(function(e){console.log(e)})},searchOneTeam:function(e){var t=this;n.collection("team").where({_id:e}).get({success:function(e){t.selectTeam=e.data[0]}})},addTeam:function(){var e=this;this.teamName?this.teamData.find(function(t){return t.teamName==e.teamName})?wx.showToast({title:"该团队名称已存在",icon:"none",duration:2e3}):n.collection("team").add({data:{teamName:this.teamName,groups:[]}}).then(function(t){e.teamName="",wx.showToast({title:"添加团队成功",icon:"none",duration:2e3}),e.searchTeam()}).catch(function(e){console.log(e)}):wx.showToast({title:"请输入团队名称",icon:"none",duration:2e3})}}}},zt6K:function(e,t){}},["PfYo"]);